import{r as h,a as E,j as a,i as b}from"../chunks/chunk-9IYMY0dI.js";import{C as T}from"../chunks/chunk-CsNioa9q.js";/* empty css                      *//* empty css                      */import"../chunks/chunk-EWSFVF2N.js";/* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      */var w="https://js.stripe.com/v3",C=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var z=function(){for(var e=document.querySelectorAll('script[src^="'.concat(w,'"]')),t=0;t<e.length;t++){var r=e[t];if(C.test(r.src))return r}return null},g=function(e){var t="",r=document.createElement("script");r.src="".concat(w).concat(t);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(r),r},A=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"5.6.0",startTime:t})},s=null,c=null,m=null,L=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},U=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},R=function(e){return s!==null?s:(s=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var o=z();if(!(o&&e)){if(!o)o=g(e);else if(o&&m!==null&&c!==null){var i;o.removeEventListener("load",m),o.removeEventListener("error",c),(i=o.parentNode)===null||i===void 0||i.removeChild(o),o=g(e)}}m=U(t,r),c=L(r),o.addEventListener("load",m),o.addEventListener("error",c)}catch(u){r(u);return}}),s.catch(function(t){return s=null,Promise.reject(t)}))},_=function(e,t,r){if(e===null)return null;var o=e.apply(void 0,t);return A(o,r),o},d,y=!1,x=function(){return d||(d=R(null).catch(function(e){return d=null,Promise.reject(e)}),d)};Promise.resolve().then(function(){return x()}).catch(function(n){y||console.warn(n)});var D=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];y=!0;var o=Date.now();return x().then(function(i){return _(i,t,o)})};const O=D("pk_test_51Qn6p4RoO280mx7jwfqkc7gummGs3CyKz5DPUgDVvzgh0faWbQCd6xZszEMfZbw88OsvZnM7EUd5msyNSslt3xu4000T32JdeY"),k=n=>{const[e,t]=h.useState(""),[r,o]=h.useState(!1),[i,u]=h.useState(""),{ensureValidToken:j,user:f}=E(),P=async()=>{o(!0),u("");try{console.log("Starting payment request with amount:",e);const l=await j();if(!l)throw new Error("Unauthorized: Failed to get authentication token.");const v=await fetch("https://api.cheap.chat/createPaymentSession",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`,Origin:window.location.origin},body:JSON.stringify({amount:Number(e),userId:(f==null?void 0:f.userId)||"unknown"})}),p=await v.json();if(console.log("Response from API:",p),!v.ok||!p.id)throw new Error(p.error||"Failed to create checkout session");const S=await O;if(!S)throw new Error("Stripe failed to initialize");await S.redirectToCheckout({sessionId:p.id})}catch(l){console.error("Payment error:",l),u(l.message),o(!1)}};return a.jsx(T,{...n,pageContent:a.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[a.jsx("h1",{children:"Buy CheapChat Credits"}),a.jsx("p",{children:"Enter the amount (in USD) you want to purchase:"}),a.jsx("input",{type:"number",placeholder:"Enter amount",value:e,onChange:l=>t(l.target.value),style:{padding:"10px",margin:"10px",fontSize:"16px",width:"200px"}}),a.jsx("br",{}),a.jsx("button",{onClick:P,disabled:!e||r,style:{backgroundColor:r?"#ccc":"#007bff",color:"white",padding:"10px 20px",fontSize:"18px",border:"none",cursor:r?"not-allowed":"pointer",borderRadius:"5px"},children:r?"Processing...":"Proceed to Payment"}),i&&a.jsx("p",{style:{color:"red",marginTop:"10px"},children:i})]})})},V=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"})),B="Billing - CheapChat",I=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"})),xe={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"/renderer/+onRenderClient.jsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:b}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/billing/+Page.jsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:V}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"/renderer/+config.js",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},title:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/billing/+title.js",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:I}}};export{xe as configValuesSerialized};
