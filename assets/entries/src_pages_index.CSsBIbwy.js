import{r as s,j as n,f as A,i as I}from"../chunks/chunk-CKHiaZki.js";/* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      */const z="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6%2012H18M12%206V18'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",N="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M20%207V8.2C20%209.88016%2020%2010.7202%2019.673%2011.362C19.3854%2011.9265%2018.9265%2012.3854%2018.362%2012.673C17.7202%2013%2016.8802%2013%2015.2%2013H4M4%2013L8%209M4%2013L8%2017'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",P=s.forwardRef(({value:r,onChange:a,onSend:t},o)=>{s.useEffect(()=>{const e=o.current,c=()=>{e&&(e.style.height="auto",e.style.height=`${e.scrollHeight}px`)};return e.addEventListener("input",c),c(),()=>{e.removeEventListener("input",c)}},[o]);const i=e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),t())};return n.jsx("textarea",{ref:o,rows:"1",className:"input-text",placeholder:"Chat with GPT-4o",value:r,onChange:a,onKeyDown:i})}),T=({icon:r,altText:a,onClick:t,extraClass:o=""})=>n.jsx("button",{className:`action-button ${o}`,onClick:t,children:n.jsx("img",{className:"icon",src:r,alt:a})}),U=({inputValue:r,setInputValue:a,onSend:t})=>{const o=s.useRef(null),i=s.useRef(null);return s.useEffect(()=>{const e=c=>{!c.target.closest("button")&&i.current&&i.current.focus()};return o.current.addEventListener("click",e),()=>o.current.removeEventListener("click",e)},[]),n.jsxs("div",{className:"input-container",ref:o,children:[n.jsx(T,{icon:z,altText:"plus",extraClass:"add-button"}),n.jsx(P,{value:r,onChange:e=>a(e.target.value),onSend:t,ref:i}),n.jsx(T,{icon:N,altText:"send",extraClass:`send-button ${r?"send-active":""}`,onClick:t})]})},D="wss://ws.cheap.chat",V=s.forwardRef((r,a)=>{const[t,o]=s.useState(null),[i,e]=s.useState([]),[c,C]=s.useState(null),[w,m]=s.useState(""),f=s.useRef("");s.useEffect(()=>((async()=>{var d,g,k,y,j;try{const h=await A(),b=(g=(d=h.tokens)==null?void 0:d.idToken)==null?void 0:g.toString(),R=(j=(y=(k=h.tokens)==null?void 0:k.idToken)==null?void 0:y.payload)==null?void 0:j.sub;if(!b||!R){console.error("âŒ No token or userId found, user must re-authenticate.");return}const S=`${R}-${Math.random().toString(36).substr(2,9)}`;C(S);const u=new WebSocket(`${D}?token=${b}&sessionId=${S}`);u.onopen=()=>{console.log("âœ… WebSocket Connected with sessionId:",S),o(u)},u.onmessage=v=>{try{const p=JSON.parse(v.data);if(console.log("ðŸ“© Message Received:",p),p.text&&m(x=>(f.current=x+p.text,f.current)),p.done){console.log("âœ… AI Response Complete - Moving to Messages List");const x=f.current.trim();x&&e(E=>[...E,{sender:"AI",text:x}]),m(""),f.current=""}}catch(p){console.error("âŒ Error parsing message:",p)}},u.onerror=v=>console.error("âŒ WebSocket Error:",v),u.onclose=()=>console.log("ðŸ”´ WebSocket Disconnected"),o(u)}catch(h){console.error("âŒ WebSocket Auth Error:",h)}})(),()=>{t&&t.close()}),[]);const M=l=>{if(t&&l.trim()){const d={action:"openai",message:l,sessionId:c};console.log("ðŸ“¤ Sending Message:",d),t.send(JSON.stringify(d)),e(g=>[...g,{sender:"user",text:l}]),m(""),f.current=""}};return s.useImperativeHandle(a,()=>({sendMessage:M})),n.jsxs("div",{className:"messages-container",children:[i.map((l,d)=>n.jsx("p",{className:`message ${l.sender}`,children:l.text},d)),w&&n.jsx("p",{children:w})," "]})}),L=()=>{const[r,a]=s.useState(""),t=s.useRef(null),o=()=>{r.trim()&&(t.current&&t.current.sendMessage(r),a(""))};return n.jsxs("div",{className:"page",children:[n.jsxs("div",{className:"body",children:[n.jsx(V,{ref:t})," "]}),n.jsx(U,{inputValue:r,setInputValue:a,onSend:o})]})},W=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"})),X={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"/renderer/+config.js",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"/renderer/+onRenderClient.jsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:I}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/index/+Page.jsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:W}}};export{X as configValuesSerialized};
