import{r as o,j as e,f as P,i as Z}from"../chunks/chunk-DL4ORxuN.js";/* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      */const H="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6%2012H18M12%206V18'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",O="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M20%207V8.2C20%209.88016%2020%2010.7202%2019.673%2011.362C19.3854%2011.9265%2018.9265%2012.3854%2018.362%2012.673C17.7202%2013%2016.8802%2013%2015.2%2013H4M4%2013L8%209M4%2013L8%2017'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",_="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%2012C2%207.28595%202%204.92893%203.46447%203.46447C4.92893%202%207.28595%202%2012%202C16.714%202%2019.0711%202%2020.5355%203.46447C22%204.92893%2022%207.28595%2022%2012C22%2016.714%2022%2019.0711%2020.5355%2020.5355C19.0711%2022%2016.714%2022%2012%2022C7.28595%2022%204.92893%2022%203.46447%2020.5355C2%2019.0711%202%2016.714%202%2012Z'%20fill='%23000'/%3e%3c/svg%3e",B=o.forwardRef(({value:i,onChange:l,onSend:n},s)=>{o.useEffect(()=>{const t=s.current,c=()=>{t&&(t.style.height="auto",t.style.height=`${t.scrollHeight}px`)};return t.addEventListener("input",c),c(),()=>{t.removeEventListener("input",c)}},[s]);const r=t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),n())};return e.jsx("textarea",{ref:s,rows:"1",className:"input-text",placeholder:"Chat with GPT-4o",value:i,onChange:l,onKeyDown:r})}),T=({icon:i,altText:l,onClick:n,extraClass:s=""})=>e.jsx("button",{className:`action-button ${s}`,onClick:n,children:e.jsx("img",{className:"icon",src:i,alt:l})}),z=({inputValue:i,setInputValue:l,isStreaming:n,onSend:s,onStop:r})=>{const t=o.useRef(null),c=o.useRef(null);return o.useEffect(()=>{const g=f=>{!f.target.closest("button")&&c.current&&c.current.focus()};return t.current.addEventListener("click",g),()=>t.current.removeEventListener("click",g)},[]),e.jsxs("div",{className:"input-container",ref:t,children:[e.jsx(T,{icon:H,altText:"plus",extraClass:"add-button"}),e.jsx(B,{value:i,onChange:g=>l(g.target.value),onSend:s,ref:c}),e.jsx(T,{icon:n?_:O,altText:n?"stop":"send",extraClass:`send-button ${i||n?"send-active":""} ${n?"stop-active":""}`,onClick:n?r:s})]})},E="data:image/svg+xml,%3csvg%20width='721'%20height='721'%20viewBox='0%200%20721%20721'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_1637_2934)'%3e%3cg%20clip-path='url(%23clip1_1637_2934)'%3e%3cpath%20d='M304.246%20294.611V249.028C304.246%20245.189%20305.687%20242.309%20309.044%20240.392L400.692%20187.612C413.167%20180.415%20428.042%20177.058%20443.394%20177.058C500.971%20177.058%20537.44%20221.682%20537.44%20269.182C537.44%20272.54%20537.44%20276.379%20536.959%20280.218L441.954%20224.558C436.197%20221.201%20430.437%20221.201%20424.68%20224.558L304.246%20294.611ZM518.245%20472.145V363.224C518.245%20356.505%20515.364%20351.707%20509.608%20348.349L389.174%20278.296L428.519%20255.743C431.877%20253.826%20434.757%20253.826%20438.115%20255.743L529.762%20308.523C556.154%20323.879%20573.905%20356.505%20573.905%20388.171C573.905%20424.636%20552.315%20458.225%20518.245%20472.141V472.145ZM275.937%20376.182L236.592%20353.152C233.235%20351.235%20231.794%20348.354%20231.794%20344.515V238.956C231.794%20187.617%20271.139%20148.749%20324.4%20148.749C344.555%20148.749%20363.264%20155.468%20379.102%20167.463L284.578%20222.164C278.822%20225.521%20275.942%20230.319%20275.942%20237.039V376.186L275.937%20376.182ZM360.626%20425.122L304.246%20393.455V326.283L360.626%20294.616L417.002%20326.283V393.455L360.626%20425.122ZM396.852%20570.989C376.698%20570.989%20357.989%20564.27%20342.151%20552.276L436.674%20497.574C442.431%20494.217%20445.311%20489.419%20445.311%20482.699V343.552L485.138%20366.582C488.495%20368.499%20489.936%20371.379%20489.936%20375.219V480.778C489.936%20532.117%20450.109%20570.985%20396.852%20570.985V570.989ZM283.134%20463.99L191.486%20411.211C165.094%20395.854%20147.343%20363.229%20147.343%20331.562C147.343%20294.616%20169.415%20261.509%20203.48%20247.593V356.991C203.48%20363.71%20206.361%20368.508%20212.117%20371.866L332.074%20441.437L292.729%20463.99C289.372%20465.907%20286.491%20465.907%20283.134%20463.99ZM277.859%20542.68C223.639%20542.68%20183.813%20501.895%20183.813%20451.514C183.813%20447.675%20184.294%20443.836%20184.771%20439.997L279.295%20494.698C285.051%20498.056%20290.812%20498.056%20296.568%20494.698L417.002%20425.127V470.71C417.002%20474.549%20415.562%20477.429%20412.204%20479.346L320.557%20532.126C308.081%20539.323%20293.206%20542.68%20277.854%20542.68H277.859ZM396.852%20599.776C454.911%20599.776%20503.37%20558.513%20514.41%20503.812C568.149%20489.896%20602.696%20439.515%20602.696%20388.176C602.696%20354.587%20588.303%20321.962%20562.392%20298.45C564.791%20288.373%20566.231%20278.296%20566.231%20268.224C566.231%20199.611%20510.571%20148.267%20446.274%20148.267C433.322%20148.267%20420.846%20150.184%20408.37%20154.505C386.775%20133.392%20357.026%20119.958%20324.4%20119.958C266.342%20119.958%20217.883%20161.22%20206.843%20215.921C153.104%20229.837%20118.557%20280.218%20118.557%20331.557C118.557%20365.146%20132.95%20397.771%20158.861%20421.283C156.462%20431.36%20155.022%20441.437%20155.022%20451.51C155.022%20520.123%20210.682%20571.466%20274.978%20571.466C287.931%20571.466%20300.407%20569.549%20312.883%20565.228C334.473%20586.341%20364.222%20599.776%20396.852%20599.776Z'%20fill='black'/%3e%3c/g%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_1637_2934'%3e%3crect%20width='720'%20height='720'%20fill='white'%20transform='translate(0.606934%200.0999756)'/%3e%3c/clipPath%3e%3cclipPath%20id='clip1_1637_2934'%3e%3crect%20width='484.139'%20height='479.818'%20fill='white'%20transform='translate(118.557%20119.958)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",W="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8%208V5.2C8%204.0799%208%203.51984%208.21799%203.09202C8.40973%202.71569%208.71569%202.40973%209.09202%202.21799C9.51984%202%2010.0799%202%2011.2%202H18.8C19.9201%202%2020.4802%202%2020.908%202.21799C21.2843%202.40973%2021.5903%202.71569%2021.782%203.09202C22%203.51984%2022%204.0799%2022%205.2V12.8C22%2013.9201%2022%2014.4802%2021.782%2014.908C21.5903%2015.2843%2021.2843%2015.5903%2020.908%2015.782C20.4802%2016%2019.9201%2016%2018.8%2016H16M5.2%2022H12.8C13.9201%2022%2014.4802%2022%2014.908%2021.782C15.2843%2021.5903%2015.5903%2021.2843%2015.782%2020.908C16%2020.4802%2016%2019.9201%2016%2018.8V11.2C16%2010.0799%2016%209.51984%2015.782%209.09202C15.5903%208.71569%2015.2843%208.40973%2014.908%208.21799C14.4802%208%2013.9201%208%2012.8%208H5.2C4.0799%208%203.51984%208%203.09202%208.21799C2.71569%208.40973%202.40973%208.71569%202.21799%209.09202C2%209.51984%202%2010.0799%202%2011.2V18.8C2%2019.9201%202%2020.4802%202.21799%2020.908C2.40973%2021.2843%202.71569%2021.5903%203.09202%2021.782C3.51984%2022%204.07989%2022%205.2%2022Z'%20stroke='%23444'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",$="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M20.8477%201.87868C19.6761%200.707109%2017.7766%200.707105%2016.605%201.87868L2.44744%2016.0363C2.02864%2016.4551%201.74317%2016.9885%201.62702%2017.5692L1.03995%2020.5046C0.760062%2021.904%201.9939%2023.1379%203.39334%2022.858L6.32868%2022.2709C6.90945%2022.1548%207.44285%2021.8693%207.86165%2021.4505L22.0192%207.29289C23.1908%206.12132%2023.1908%204.22183%2022.0192%203.05025L20.8477%201.87868ZM18.0192%203.29289C18.4098%202.90237%2019.0429%202.90237%2019.4335%203.29289L20.605%204.46447C20.9956%204.85499%2020.9956%205.48815%2020.605%205.87868L17.9334%208.55027L15.3477%205.96448L18.0192%203.29289ZM13.9334%207.3787L3.86165%2017.4505C3.72205%2017.5901%203.6269%2017.7679%203.58818%2017.9615L3.00111%2020.8968L5.93645%2020.3097C6.13004%2020.271%206.30784%2020.1759%206.44744%2020.0363L16.5192%209.96448L13.9334%207.3787Z'%20fill='%23444'/%3e%3c/svg%3e",D=()=>e.jsxs("div",{className:"message-options user-message-options",children:[e.jsx("div",{className:"message-button",children:e.jsx("img",{src:$,style:{height:"1rem"},alt:"Edit"})}),e.jsx("div",{className:"message-button",children:e.jsx("img",{src:W,style:{height:"1rem"},alt:"Copy"})})]}),J="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8%208V5.2C8%204.0799%208%203.51984%208.21799%203.09202C8.40973%202.71569%208.71569%202.40973%209.09202%202.21799C9.51984%202%2010.0799%202%2011.2%202H18.8C19.9201%202%2020.4802%202%2020.908%202.21799C21.2843%202.40973%2021.5903%202.71569%2021.782%203.09202C22%203.51984%2022%204.0799%2022%205.2V12.8C22%2013.9201%2022%2014.4802%2021.782%2014.908C21.5903%2015.2843%2021.2843%2015.5903%2020.908%2015.782C20.4802%2016%2019.9201%2016%2018.8%2016H16M5.2%2022H12.8C13.9201%2022%2014.4802%2022%2014.908%2021.782C15.2843%2021.5903%2015.5903%2021.2843%2015.782%2020.908C16%2020.4802%2016%2019.9201%2016%2018.8V11.2C16%2010.0799%2016%209.51984%2015.782%209.09202C15.5903%208.71569%2015.2843%208.40973%2014.908%208.21799C14.4802%208%2013.9201%208%2012.8%208H5.2C4.0799%208%203.51984%208%203.09202%208.21799C2.71569%208.40973%202.40973%208.71569%202.21799%209.09202C2%209.51984%202%2010.0799%202%2011.2V18.8C2%2019.9201%202%2020.4802%202.21799%2020.908C2.40973%2021.2843%202.71569%2021.5903%203.09202%2021.782C3.51984%2022%204.07989%2022%205.2%2022Z'%20stroke='%23444'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",K="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M20.8477%201.87868C19.6761%200.707109%2017.7766%200.707105%2016.605%201.87868L2.44744%2016.0363C2.02864%2016.4551%201.74317%2016.9885%201.62702%2017.5692L1.03995%2020.5046C0.760062%2021.904%201.9939%2023.1379%203.39334%2022.858L6.32868%2022.2709C6.90945%2022.1548%207.44285%2021.8693%207.86165%2021.4505L22.0192%207.29289C23.1908%206.12132%2023.1908%204.22183%2022.0192%203.05025L20.8477%201.87868ZM18.0192%203.29289C18.4098%202.90237%2019.0429%202.90237%2019.4335%203.29289L20.605%204.46447C20.9956%204.85499%2020.9956%205.48815%2020.605%205.87868L17.9334%208.55027L15.3477%205.96448L18.0192%203.29289ZM13.9334%207.3787L3.86165%2017.4505C3.72205%2017.5901%203.6269%2017.7679%203.58818%2017.9615L3.00111%2020.8968L5.93645%2020.3097C6.13004%2020.271%206.30784%2020.1759%206.44744%2020.0363L16.5192%209.96448L13.9334%207.3787Z'%20fill='%23444'/%3e%3c/svg%3e",q=()=>e.jsxs("div",{className:"message-options ai-message-options",children:[e.jsx("div",{className:"message-button",children:e.jsx("img",{src:K,style:{height:"1rem"},alt:"Edit"})}),e.jsx("div",{className:"message-button",children:e.jsx("img",{src:J,style:{height:"1rem"},alt:"Copy"})})]}),Q="wss://ws.cheap.chat",X=o.forwardRef(({isStreaming:i,setIsStreaming:l},n)=>{const[s,r]=o.useState(null),[t,c]=o.useState([]),[g,f]=o.useState(null),[M,k]=o.useState(""),h=o.useRef(""),S=o.useRef([]),C=o.useRef(0),U=5,y=async()=>{var a,d,x,V,R;try{const v=await P(),N=(d=(a=v.tokens)==null?void 0:a.idToken)==null?void 0:d.toString(),b=(R=(V=(x=v.tokens)==null?void 0:x.idToken)==null?void 0:V.payload)==null?void 0:R.sub;if(!N||!b){console.error("❌ No token or userId found, user must re-authenticate.");return}const j=`${b}-${Math.random().toString(36).substr(2,9)}`;f(j);const u=new WebSocket(`${Q}?token=${N}&sessionId=${j}`);u.onopen=()=>{for(console.log("✅ WebSocket Connected with sessionId:",j),r(u),C.current=0;S.current.length>0;){const m=S.current.shift();u.send(JSON.stringify(m))}},u.onmessage=m=>{try{const p=JSON.parse(m.data);if(console.log("📩 Message Received:",p),p.text&&k(w=>(h.current=w+p.text,h.current)),p.done||p.timeout||p.canceled){l(!1),console.log("✅ AI Response Complete - Moving to Messages List");const w=h.current.trim();w&&c(I=>[...I,{sender:"ai-message",text:w}]),k(""),h.current=""}}catch(p){console.error("❌ Error parsing message:",p)}},u.onerror=m=>console.error("❌ WebSocket Error:",m),u.onclose=()=>{console.log("🔴 WebSocket Disconnected"),r(null),L()},r(u)}catch(v){console.error("❌ WebSocket Auth Error:",v),L()}},L=()=>{if(C.current>=U){console.error("❌ Max reconnect attempts reached. Stopping reconnect attempts.");return}const a=Math.min(1e3*Math.pow(2,C.current),3e4);C.current+=1,console.log(`🔄 Attempting to reconnect WebSocket in ${a/1e3} seconds...`),setTimeout(y,a)},G=a=>{if(a.trim()){const d={action:"openai",message:a,sessionId:g};console.log("📤 Queueing Message:",d),c(x=>[...x,{sender:"user-message",text:a}]),s&&s.readyState===WebSocket.OPEN?s.send(JSON.stringify(d)):(S.current.push(d),(!s||s.readyState===WebSocket.CLOSED)&&L())}},A=()=>{s&&s.readyState===WebSocket.OPEN&&(console.log("🚫 Sending cancel request..."),s.send(JSON.stringify({action:"cancel",sessionId:g})))};return o.useEffect(()=>{y()},[]),o.useImperativeHandle(n,()=>({sendMessage:G,cancelMessage:A})),e.jsxs("div",{className:"messages-container",children:[t.map((a,d)=>e.jsx("div",{className:"message-container",children:e.jsx("div",{className:"message-container-inner",children:a.sender==="user-message"?e.jsxs("div",{className:"user-message-container",children:[e.jsx("p",{className:"message user-message",children:a.text}),e.jsx(D,{})]}):e.jsxs("div",{className:"ai-message-wrapper",children:[e.jsx("div",{className:"ai-message-icon",children:e.jsx("img",{src:E,alt:"OpenAI"})}),e.jsxs("div",{className:"ai-message-container",children:[e.jsx("p",{className:"message ai-message",children:a.text}),e.jsx(q,{})]})]})})},d)),(M||i)&&e.jsx("div",{className:"message-container",children:e.jsx("div",{className:"message-container-inner",children:e.jsxs("div",{className:"ai-message-wrapper",children:[e.jsx("div",{className:"ai-message-icon",children:e.jsx("img",{src:E,alt:"OpenAI"})}),e.jsx("div",{className:"ai-message-container",children:e.jsxs("p",{className:"message ai-message",children:[M||" ",e.jsx("span",{className:"loading-circle"})]})})]})})})]})}),F=()=>{const[i,l]=o.useState(""),[n,s]=o.useState(!1),r=o.useRef(null),t=()=>{i.trim()&&(r.current&&(r.current.sendMessage(i),s(!0)),l(""))},c=()=>{r.current&&(r.current.cancelMessage(),s(!1))};return e.jsxs("div",{className:"page",children:[e.jsxs("div",{className:"body",children:[e.jsx(X,{ref:r,isStreaming:n,setIsStreaming:s})," "]}),e.jsx(z,{inputValue:i,setInputValue:l,isStreaming:n,onSend:t,onStop:c})]})},Y=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"})),p2={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"/renderer/+config.js",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"/renderer/+onRenderClient.jsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Z}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/index/+Page.jsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Y}}};export{p2 as configValuesSerialized};
